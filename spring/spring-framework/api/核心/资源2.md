# 资源

## 资源

```java
## 资源
org.springframework.core.io.InputStreamSource
    + org.springframework.core.io.support.EncodedResource
    + org.springframework.core.io.Resource
        + org.springframework.core.io.WritableResource
            + org.springframework.core.io.PathResource
            + org.springframework.core.io.FileUrlResource
            + org.springframework.core.io.FileSystemResource
        + org.springframework.core.io.ContextResource
            + org.springframework.core.io.DefaultResourceLoader.ClassPathContextResource
            + org.springframework.web.context.support.ServletContextResource
        + org.springframework.core.io.AbstractResource
            + org.springframework.core.io.DescriptiveResource
            + org.springframework.core.io.InputStreamResource
            + org.springframework.core.io.PathResource
            + org.springframework.core.io.FileSystemResource
            + org.springframework.core.io.VfsResource
            + org.springframework.core.io.AbstractFileResolvingResource
                + org.springframework.core.io.UrlResource
                    + org.springframework.core.io.FileUrlResource
                + org.springframework.core.io.ClassPathResource
                    + org.springframework.core.io.DefaultResourceLoader.ClassPathContextResource
                + org.springframework.web.context.support.ServletContextResource
            + org.springframework.core.io.ByteArrayResource
                + org.springframework.web.servlet.resource.TransformedResource
                + org.springframework.web.reactive.resource.TransformedResource
        + org.springframework.web.servlet.resource.HttpResource
        + org.springframework.web.reactive.resource.HttpResource
    + org.springframework.web.multipart.MultipartFile
        + org.springframework.web.multipart.commons.CommonsMultipartFile
        + org.springframework.mock.web.MockMultipartFile
```

### InputStreamSource

```java
## 输入流资源：提供了InputStream
org.springframework.core.io.InputStreamSource
+ getInputStream()
```

### Resource

```java
## 资源描述符：抽象了文件或类路径资源等底层资源
org.springframework.core.io.Resource
+ createRelative(String relativePath)
+ contentLength()
+ lastModified()
+ readableChannel()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ getDescription()
+ exists()
+ isFile()
+ isOpen()
+ isReadable()
```

### WritableResource

```java
## 可写入资源：提供了OutputStream
org.springframework.core.io.WritableResource
+ writableChannel()
+ getOutputStream()
+ isWritable()
```

### ContextResource

```java
## 上下文资源：加载上下文、类路径或者文件系统相对路径中的资源
org.springframework.core.io.ContextResource
+ getPathWithinContext()
```

### AbstractResource

```java
## 抽象的资源：实现了通用方法
org.springframework.core.io.AbstractResource
+ createRelative(String relativePath)
+ contentLength()
+ lastModified()
+ readableChannel()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ exists()
+ isFile()
+ isOpen()
+ isReadable()
```

### AbstractFileResolvingResource

```java
## 抽象的文件解析资源：把URL解析为UrlResource或ClassPathResource等文件引用
org.springframework.core.io.AbstractFileResolvingResource
+ contentLength()
+ lastModified()
+ readableChannel()
+ getFile()
+ exists()
+ isFile()
+ isReadable()
```

### EncodedResource

```java
## 编码资源：指定了编码类型或Charset的资源
org.springframework.core.io.support.EncodedResource
+ EncodedResource(Resource resource)
+ EncodedResource(Resource resource, Charset charset)
+ EncodedResource(Resource resource, String encoding)
+ getInputStream()
+ getReader()
+ getResource()
+ getCharset()
+ getEncoding()
+ requiresReader()
```

### DescriptiveResource

```java
## 描述性资源：持有资源描述，不指向实际可读资源
org.springframework.core.io.DescriptiveResource
+ DescriptiveResource(String description)
+ getInputStream()
+ getDescription()
+ exists()
+ isReadable()
```

### InputStreamResource

```java
## 输入流资源：从InputStream中加载资源
org.springframework.core.io.InputStreamResource
+ InputStreamResource(InputStream inputStream)
+ InputStreamResource(InputStream inputStream, String description)
+ getInputStream()
+ getDescription()
+ exists()
+ isOpen()
```

### ByteArrayResource

```java
## 字节数组资源：根据字节数组，创建ByteArrayInputStream
org.springframework.core.io.ByteArrayResource
+ ByteArrayResource(byte[] byteArray)
+ ByteArrayResource(byte[] byteArray, String description)
+ contentLength()
+ getInputStream()
+ getByteArray()
+ getDescription()
+ exists()
```

### PathResource

```java
## Path资源：把Path解析为URL或文件
org.springframework.core.io.PathResource
+ PathResource(String path)
+ PathResource(URI uri)
+ PathResource(Path path)
+ createRelative(String relativePath)
+ contentLength()
+ readableChannel()
+ writableChannel()
+ getInputStream()
+ getOutputStream()
+ getPath()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ getDescription()
+ exists()
+ isFile()
+ isReadable()
+ isWritable()
+ lastModified()
```

### UrlResource

```java
## URL资源：把file:协议解析为URL或文件
org.springframework.core.io.UrlResource
+ UrlResource(String path)
+ UrlResource(String protocol, String location)
+ UrlResource(String protocol, String location, String fragment)
+ UrlResource(URI uri)
+ UrlResource(URL url)
+ createRelative(String relativePath)
+ getInputStream()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ getDescription()
+ isFile()
```

### FileUrlResource

```java
## 文件URL资源：把file:协议解析为文件
org.springframework.core.io.FileUrlResource
+ FileUrlResource(String location)
+ FileUrlResource(URL url)
+ createRelative(String relativePath)
+ writableChannel()
+ getOutputStream()
+ getFile()
+ isWritable()
```

### FileSystemResource

```java
## 文件系统资源：把Path或File解析为URL或文件
org.springframework.core.io.FileSystemResource
+ FileSystemResource(File file)
+ FileSystemResource(String path)
+ FileSystemResource(Path filePath)
+ FileSystemResource(FileSystem fileSystem, String path)
+ createRelative(String relativePath)
+ contentLength()
+ lastModified()
+ readableChannel()
+ writableChannel()
+ getInputStream()
+ getOutputStream()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ getDescription()
+ getPath()
+ exists()
+ isFile()
+ isReadable()
+ isWritable()
```

### VfsResource

```java
## 虚拟文件系统资源：基于JBoss VFS的资源
+ org.springframework.core.io.VfsResource
+ VfsResource(Object resource)
+ createRelative(String relativePath)
+ contentLength()
+ lastModified()
+ getInputStream()
+ getURI()
+ getURL()
+ getFile()
+ getFilename()
+ getDescription()
+ exists()
+ isReadable()
```

### ClassPathResource

```java
## 类路径资源：根据指定类或类加载器加载资源
org.springframework.core.io.ClassPathResource
+ ClassPathResource(String path)
+ ClassPathResource(String path, Class<?> clazz)
+ ClassPathResource(String path, ClassLoader classLoader)
+ createRelative(String relativePath)
+ getInputStream()
+ getClassLoader()
+ getPath()
+ getURL()
+ getFilename()
+ getDescription()
+ exists()
+ isReadable()
```

### ClassPathContextResource

```java
## 类路径上下文资源：加载上下文相对路径中的资源
org.springframework.core.io.DefaultResourceLoader.ClassPathContextResource
+ ClassPathContextResource(String path, ClassLoader classLoader)
+ createRelative(String relativePath)
+ getPathWithinContext()
```

## 资源加载器

```java
## 资源加载器
org.springframework.core.io.ResourceLoader
    + org.springframework.core.io.support.ResourcePatternResolver
        + org.springframework.core.io.support.PathMatchingResourcePatternResolver
            + org.springframework.web.context.support.ServletContextResourcePatternResolver
        + org.springframework.context.ApplicationContext
            + ...
    + org.springframework.core.io.DefaultResourceLoader
        + org.springframework.core.io.FileSystemResourceLoader
        + org.springframework.core.io.ClassRelativeResourceLoader
        + org.springframework.web.context.support.ServletContextResourceLoader
        + org.springframework.context.support.AbstractApplicationContext
            + ...
```

### ResourceLoader

```java
## 资源加载器：加载类路径或文件系统资源
org.springframework.core.io.ResourceLoader
+ CLASSPATH_URL_PREFIX = "classpath:"
+ getClassLoader()
+ getResource(String location)
```

### ResourcePatternResolver

```java
## 资源模式解析器：解析Ant等风格的路径模式中的资源
org.springframework.core.io.support.ResourcePatternResolver
+ CLASSPATH_ALL_URL_PREFIX = "classpath*:"
+ getResources(String locationPattern)
```

### DefaultResourceLoader

```java
## 默认的资源加载器：资源编辑器使用的资源加载器
org.springframework.core.io.DefaultResourceLoader
+ DefaultResourceLoader()
+ DefaultResourceLoader(ClassLoader classLoader)
+ addProtocolResolver(ProtocolResolver resolver)
+ clearResourceCaches()
+ getClassLoader()
+ getProtocolResolvers()
+ getResource(String location)
+ getResourceCache(Class<T> valueType)
+ setClassLoader(ClassLoader classLoader)
```

### FileSystemResourceLoader

```java
## 文件系统资源加载器：把路径解析为文件系统资源
org.springframework.core.io.FileSystemResourceLoader
```

### ClassRelativeResourceLoader

```java
## 类相对路径资源加载器：加载指定类的相对路径中的资源
org.springframework.core.io.ClassRelativeResourceLoader
+ ClassRelativeResourceLoader(Class<?> clazz)
```

### PathMatchingResourcePatternResolver

```java
## 路径匹配的资源模式解析器：把资源路径解析为一个或多个匹配的资源
org.springframework.core.io.support.PathMatchingResourcePatternResolver
+ PathMatchingResourcePatternResolver()
+ PathMatchingResourcePatternResolver(ClassLoader classLoader)
+ PathMatchingResourcePatternResolver(ResourceLoader resourceLoader)
+ getClassLoader()
+ getPathMatcher()
+ getResourceLoader()
+ getResource(String location)
+ getResources(String locationPattern)
+ setPathMatcher(PathMatcher pathMatcher)
```

## 属性加载器支持

```java
## 属性加载器支持
org.springframework.core.io.support.PropertiesLoaderSupport
    + org.springframework.beans.factory.config.PropertiesFactoryBean
    + org.springframework.beans.factory.config.PropertyResourceConfigurer
        + ...
```

### PropertiesLoaderSupport

```java
## 属性加载器支持：需要从一个或多个资源中加载属性的JavaBean风格的组件的基类，支持本地Properties。
org.springframework.core.io.support.PropertiesLoaderSupport
+ PropertiesLoaderSupport()
+ setFileEncoding(String encoding)
+ setLocalOverride(boolean localOverride)
+ setIgnoreResourceNotFound(boolean ignoreResourceNotFound)
+ setLocation(Resource location)
+ setLocations(Resource... locations)
+ setProperties(Properties properties)
+ setPropertiesArray(Properties... propertiesArray)
+ setPropertiesPersister(PropertiesPersister propertiesPersister)
```

## 属性资源工厂

```java
org.springframework.core.io.support.PropertySourceFactory
    + org.springframework.core.io.support.DefaultPropertySourceFactory
```

### 

```java

```

### 

```java

```

## 工具

### SpringFactoriesLoader

```java
## Spring工厂加载器：框架内部使用的通用工厂加载机制
org.springframework.core.io.support.SpringFactoriesLoader
+ FACTORIES_RESOURCE_LOCATION = "META-INF/spring.factories"
+ loadFactories(Class<T> factoryType, ClassLoader classLoader)
+ loadFactoryNames(Class<?> factoryType, ClassLoader classLoader)
```

### ProtocolResolver

```java
## 协议解析器：解析特定协议的资源
org.springframework.core.io.ProtocolResolver
+ resolve(String location, ResourceLoader resourceLoader)
```

### LocalizedResourceHelper

```java
## 本地化资源工具：通过文件名、扩展名和当前Locale加载本地化资源
org.springframework.core.io.support.LocalizedResourceHelper
+ DEFAULT_SEPARATOR = "_"
+ LocalizedResourceHelper()
+ LocalizedResourceHelper(ResourceLoader resourceLoader)
+ findLocalizedResource(String name, String extension, Locale locale)
+ setSeparator(String separator)
```

### ResourceRegion

```java
## 资源区域：通过资源中区域的起始位置和字节数来实现
org.springframework.core.io.support.ResourceRegion
+ ResourceRegion(Resource resource, long position, long count)
+ getResource()
+ getPosition()
+ getCount()
```

### ResourceEditor

```java
## 资源编辑器：把资源路径转换为资源属性
org.springframework.core.io.ResourceEditor
+ ResourceEditor()
+ ResourceEditor(ResourceLoader resourceLoader, PropertyResolver propertyResolver)
+ ResourceEditor(ResourceLoader resourceLoader, PropertyResolver propertyResolver, boolean ignoreUnresolvablePlaceholders)
+ getAsText()
+ setAsText(String text)
```

### ResourceArrayPropertyEditor

```java
## 资源数组属性编辑器：
## 把位置模式字符串转换为Resource数组，例如：file:C:/my*.txt或classpath*:myfile.txt
## 把位置模式集合或数组转换为合并的Resource数组
org.springframework.core.io.support.ResourceArrayPropertyEditor
+ ResourceArrayPropertyEditor()
+ ResourceArrayPropertyEditor(ResourcePatternResolver resourcePatternResolver, PropertyResolver propertyResolver)
+ ResourceArrayPropertyEditor(ResourcePatternResolver resourcePatternResolver, PropertyResolver propertyResolver, boolean ignoreUnresolvablePlaceholders)
+ setAsText(String text)
+ setValue(Object value)
```

### ResourcePatternUtils

```java
## 资源模式工具：确定指定URL是否是可以被ResourcePatternResolver加载的资源位置
org.springframework.core.io.support.ResourcePatternUtils
+ isUrl(String resourceLocation)
+ getResourcePatternResolver(ResourceLoader resourceLoader)
```

### PropertiesLoaderUtils

```java
## 属性加载工具：加载Properties，执行输入流的标准处理
org.springframework.core.io.support.PropertiesLoaderUtils
+ loadProperties(Resource resource)
+ loadProperties(EncodedResource resource)
+ loadAllProperties(String resourceName)
+ loadAllProperties(String resourceName, ClassLoader classLoader)
+ fillProperties(Properties props, Resource resource)
+ fillProperties(Properties props, EncodedResource resource)
```

### VfsUtils

```java
## 虚拟文件系统工具：检测和访问类路径中的JBoss VFS
org.springframework.core.io.VfsUtils
```

## 

## buffer.DataBuffer

```java
org.springframework.core.io.buffer.DataBuffer
    + org.springframework.core.io.buffer.DataBufferWrapper
    + org.springframework.core.io.buffer.DefaultDataBuffer
    + org.springframework.core.io.buffer.PooledDataBuffer
        + org.springframework.core.io.buffer.NettyDataBuffer
```

## buffer.DataBufferFactory

```java
org.springframework.core.io.buffer.DataBufferFactory
    + org.springframework.core.io.buffer.DefaultDataBufferFactory
    + org.springframework.core.io.buffer.NettyDataBufferFactory
```

## buffer.DataBufferLimitException

```java
org.springframework.core.io.buffer.DataBufferLimitException
```

## buffer.DataBufferUtils

```java
org.springframework.core.io.buffer.DataBufferUtils
```

## buffer.DataBufferUtils.Matcher

```java
org.springframework.core.io.buffer.DataBufferUtils.Matcher
```

## buffer.LimitedDataBufferList

```java
org.springframework.core.io.buffer.LimitedDataBufferList
```
